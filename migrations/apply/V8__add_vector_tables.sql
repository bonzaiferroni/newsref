CREATE TABLE IF NOT EXISTS source_distance (id BIGSERIAL PRIMARY KEY, origin_id BIGINT NOT NULL, target_id BIGINT NOT NULL, model_id INT NOT NULL, distance REAL NOT NULL, CONSTRAINT fk_source_distance_origin_id__id FOREIGN KEY (origin_id) REFERENCES "source"(id) ON DELETE CASCADE ON UPDATE RESTRICT, CONSTRAINT fk_source_distance_target_id__id FOREIGN KEY (target_id) REFERENCES "source"(id) ON DELETE CASCADE ON UPDATE RESTRICT, CONSTRAINT fk_source_distance_model_id__id FOREIGN KEY (model_id) REFERENCES vector_model(id) ON DELETE CASCADE ON UPDATE RESTRICT);
CREATE SEQUENCE IF NOT EXISTS source_distance_id_seq START WITH 1 MINVALUE 1 MAXVALUE 9223372036854775807;
ALTER TABLE feed ALTER COLUMN created_at TYPE TIMESTAMP, ALTER COLUMN created_at SET DEFAULT (NOW());
